<!DOCTYPE html>
<html>
<head>
    <title>タイル画像生成</title>
</head>
<body>
    <h1>タイル画像生成</h1>
    <p>画像を選択して 3x3 のタイル画像を生成します。エッジで繋がっているかの確認に。</p>
    <!-- 画像を追加するフォーム -->
    <input type="file" accept="image/*" onchange="handleFileSelect(event)">
    <div id="imageContainer" style="border: 2px dashed #ccc; width: 300px; height: 300px;">
        <img id="uploadedImage" style="display: none;">
    </div>
    <canvas id="tileCanvas" width="600" height="600" style="border: 2px solid #000;"></canvas>

    <script>
        const canvas = document.getElementById('tileCanvas');
        const context = canvas.getContext('2d');

        function handleFileSelect(event) {
            const file = event.target.files[0];
            const reader = new FileReader();

            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    context.clearRect(0, 0, canvas.width, canvas.height);
                    const tileSize = canvas.width / 3;
                    for (let i = 0; i < 3; i++) {
                        for (let j = 0; j < 3; j++) {
                            context.drawImage(img, 0, 0, img.width, img.height, j * tileSize, i * tileSize, tileSize, tileSize);
                        }
                    }
                }
                img.src = e.target.result;
            }

            if (file) {
                reader.readAsDataURL(file);
            }
        }
    </script>
</body>
</html>
