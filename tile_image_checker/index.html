<!DOCTYPE html>
<html>
<head>
    <title>タイル画像生成</title>
</head>
<body>
    <h1>タイル画像生成</h1>
    <p>画像をドラッグ＆ドロップしてタイル画像を生成します。</p>
    <div id="imageContainer" style="border: 2px dashed #ccc; width: 300px; height: 300px;">
        <img id="uploadedImage" style="display: none;">
    </div>
    <canvas id="tileCanvas" width="600" height="600" style="border: 2px solid #000;"></canvas>

    <script>
        const canvas = document.getElementById('tileCanvas');
        const context = canvas.getContext('2d');

        // ドラッグ＆ドロップイベントの処理
        document.getElementById('imageContainer').addEventListener('drop', handleDrop, false);
        document.getElementById('imageContainer').addEventListener('dragover', handleDragOver, false);

        function handleDrop(event) {
            event.preventDefault();
            const file = event.dataTransfer.files[0];
            const reader = new FileReader();

            // ドラッグ＆ドロップされた画像を読み込んでタイル画像を生成
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    context.clearRect(0, 0, canvas.width, canvas.height);
                    const tileSize = canvas.width / 3;
                    for (let i = 0; i < 3; i++) {
                        for (let j = 0; j < 3; j++) {
                            context.drawImage(img, 0, 0, img.width, img.height, j * tileSize, i * tileSize, tileSize, tileSize);
                        }
                    }
                }
                img.src = e.target.result;
            }

            reader.readAsDataURL(file);
        }

        function handleDragOver(event) {
            event.preventDefault();
        }
    </script>
</body>
</html>
